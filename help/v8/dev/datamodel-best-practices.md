---
product: Adobe Campaign
title: 資料模型最佳實務
description: 了解Campaign資料模型擴充功能最佳實務
source-git-commit: 726e8d3ba00481237af2765e2f339d755f4e6a01
workflow-type: tm+mt
source-wordcount: '2681'
ht-degree: 4%

---

# 資料模型最佳實務{#data-model-best-practices}

本檔案概述設計Adobe Campaign資料模型時的主要建議。

Adobe Campaign系統非常靈活，可擴充至初次實作以外。 不過，雖然可能性是無限的，但做出明智的決策並建立堅實的基礎，才能開始設計您的資料模型，這一點至關重要。

如需深入了解Campaign內建表格及其彼此的關聯，請參閱[本區段](datamodel.md) 。

[!DNL :bulb:] 閱讀本 [節](schemas.md) 以開始使用Campaign綱要。

[!DNL :bulb:] 在本頁面中，了解如何設定擴充功能結構，以擴充Adobe Campaign資料庫的概念資料 [模型](extend-schema.md)。

## 資料模型架構{#data-model-architecture}

Adobe Campaign是功能強大的跨頻道行銷活動管理系統，可協助您協調線上和離線策略，以建立個人化的客戶體驗。

### 以客戶為中心的方法{#customer-centric-approach}

雖然大部分的電子郵件服務提供者都透過清單導向方法與客戶通訊，但Adobe Campaign需仰賴關係資料庫，才能運用客戶及其屬性的更廣泛檢視。

要訪問每個表的說明，請轉至&#x200B;**[!UICONTROL Admin > Configuration > Data schemas]**，從清單中選擇資源，然後按一下&#x200B;**[!UICONTROL Documentation]**&#x200B;頁簽。


>[!NOTE]
>
>Adobe Campaign可建立[自訂收件者表格](custom-recipient.md)。 但是，在大多數情況下，建議使用內建[收件者表](datamodel.md#ootb-profiles)，該表已預先建立其他表和功能。

### Adobe Campaign的資料{#data-for-campaign}

哪些資料應傳送至Adobe Campaign? 判斷行銷活動所需的資料至關重要。

>[!NOTE]
>
>Adobe Campaign既非資料倉庫，也非報表工具。 因此，請勿嘗試將所有可能的客戶及其相關資訊匯入Adobe Campaign，或匯入僅用於建立報表的資料。

要決定在Adobe Campaign是否需要某個屬性，請問自己是否屬於以下類別之一：

* 用於&#x200B;**segmentation**&#x200B;的屬性
* 用於&#x200B;**資料管理進程**&#x200B;的屬性（例如聚合計算）
* 用於&#x200B;**個人化**&#x200B;的屬性

若未落入其中任何一個，您很可能在Adobe Campaign中不需要此屬性。

### 資料類型選擇{#data-types}

若要確保系統的良好架構和效能，請遵循下列最佳實務，在Adobe Campaign中設定資料。

* 在大表格中，您可以插入字串或數值欄位，並新增連結至參考表格（使用值清單時）。
* **expr**&#x200B;屬性允許將架構屬性定義為計算欄位，而非表中的物理集值。 這可以讓使用者以不同格式（例如年齡和出生日期）存取資訊，而無須儲存這兩個值。 這是避免重複欄位的好方法。 例如，「收件者」表格會使用網域的運算式，而此運算式已出現在電子郵件欄位中。
* 但是，當運算式計算複雜時，不建議使用&#x200B;**expr**&#x200B;屬性作為即時計算，可能會影響查詢的效能。
* **XML**&#x200B;類型是避免建立過多欄位的好方法。 但它也佔用了磁碟空間，因為它使用資料庫中的CLOB列。 它還可能導致複雜的SQL查詢，並可能影響效能。
* **string**&#x200B;欄位的長度應一律以欄定義。 依預設，Adobe Campaign中的最大長度為16K，但如果您已知道大小不會超過較短的長度，則Adobe建議將欄位保持在較短的長度。
* 如果您確定源系統中的欄位被高估且無法達到，則可以接受在Adobe Campaign中的欄位比在源系統中的欄位短。 這可能表示Adobe Campaign中字串較短或整數較小。

### 欄位選擇{#choice-of-fields}

如果欄位具有定位或個人化目的，則必須將其儲存在表格中。 換句話說，如果欄位未用來傳送個人化電子郵件，或用作查詢中的標準，則會不必要地佔用磁碟空間。

### 鍵的選擇{#choice-of-keys}

除了在大多數表中預設定義的&#x200B;**autouuid**&#x200B;和&#x200B;**autopk**&#x200B;之外，您還應考慮添加一些邏輯或業務密鑰（帳號、客戶端號等）。 它稍後可用於匯入/調解或資料包。 有關詳細資訊，請參閱[標識符](#identifiers)。

高效的密鑰對效能至關重要。 透過Snowflake，您可以插入數值或字串式資料類型作為表格的索引鍵。

<!-- ### Dedicated tablespaces {#dedicated-tablespaces}

The tablespace attribute in the schema allows you to specify a dedicated tablespace for a table.

The installation wizard allows you to store objects by type (data, temporary).

Dedicated tablespaces are better for partitioning, security rules, and allow fluid and flexible administration, better optimization, and performance. -->

## 識別碼 {#identifiers}

Adobe Campaign資源有三個識別碼，且可以新增其他識別碼。

下表說明這些識別碼及其用途。

| 識別碼 | 說明 | 最佳實務 |
|--- |--- |--- |
| Id | <ul><li>id是Adobe Campaign表的物理主鍵。 對於內建表格，此為通用唯一ID(UUID)</li><li>此識別碼必須是唯一的。 </li><li>UUID可在架構定義中顯示。</li></ul> | <ul><li>自動產生的識別碼不應作為工作流程或套件定義中的參考。</li><li>表格中的id為UUID，此類型不應變更。</li></ul> |
| 名稱（或內部名稱） | <ul><li>此資訊是表中記錄的唯一標識符。 此值可手動更新，通常具有產生的名稱。</li><li>此識別碼會在部署至不同的Adobe Campaign例項時保留其值，且不應為空。</li></ul> | <ul><li>如果要將物件從環境部署至另一個環境，請重新命名Adobe Campaign產生的記錄名稱。</li><li>當對象具有命名空間屬性（例如&#x200B;*schema*）時，此通用命名空間將用於所有建立的自定義對象。 不應使用某些保留的命名空間：*nms*、*xtk*&#x200B;等。  請注意，有些命名空間僅為內部。 [瞭解更多](schemas.md#reserved-namespaces)。</li><li>當物件沒有任何命名空間時（例如&#x200B;*workflow*&#x200B;或&#x200B;*delivery*），此命名空間概念將新增為內部名稱物件的前置詞：*namespaceMyObjectName*。</li><li>請勿使用特殊字元，例如空格&quot; &quot;、半欄&quot;:&quot;或連字型大小&quot;-&quot;。 所有這些字元都將替換為底線「_」（允許的字元）。 例如，「abc-def」和「abc:def」會儲存為「abc_def」並互相覆寫。</li></ul> |
| 標籤 | <ul><li>標籤是Adobe Campaign中物件或記錄的業務識別碼。</li><li>此對象允許空格和特殊字元。</li><li>它不能保證記錄的獨特性。</li></ul> | <ul><li>建議您判斷物件標籤的結構。</li><li>這是最方便使用者為Adobe Campaign使用者識別記錄或物件的解決方案。</li></ul> |

Adobe Campaign主要索引鍵是針對所有內建表格自動產生的UUID。 UUID也可用於自訂表格。

即使ID數量是無限的，您也應該處理資料庫的大小，以確保最佳效能。 若要避免發生任何問題，請務必調整執行個體清除設定。 如需詳細資訊，請參閱[本節](#data-retention)。


## 自訂內部索引鍵{#custom-internal-keys}

在Adobe Campaign中建立的每個表格都需要主鍵。

大多陣列織都從外部系統導入記錄。 雖然Recipient表的物理密鑰是「id」屬性，但您還可以確定自定義密鑰。

此自訂金鑰是外部系統饋送Adobe Campaign的實際記錄主金鑰。

建立自訂表格時，有兩個選項：
* 自動產生的金鑰(id)和內部金鑰（自訂）的組合。 如果您的系統密鑰是複合密鑰或不是整數，則此選項很有趣。 使用Snowflake時，整數或字串型索引鍵可在大表格中提供更高的效能，並與其他表格連接。
* 使用主鍵作為外部系統主鍵。 此解決方案通常較為理想，因為它簡化了資料匯入和匯出的方法，且在不同系統之間具有一致的鍵值。 **** 如果索引鍵名為「id」，且預期會填入外部值（非自動產生），則應停用自動識別。

>[!CAUTION]
>
>autouuid不應在工作流程中作為參考。


## 連結和基數{#links-and-cardinality}

### 連結 {#links}

請注意大表上的「自己」完整性。 刪除具有「自有」完整性的大表的記錄可能會停止實例。 表已鎖定，且逐個刪除。 因此，最好對具有大容量的子表使用「中性」完整性。

將連結聲明為外部連接對效能不利。 零ID記錄模擬外部聯接功能。 如果連結使用&#x200B;**autouuid**，則不需要聲明外部聯接。

雖然可以在工作流中連接任何表，但Adobe建議直接在資料結構定義中定義資源之間的公用連結。

連結的定義應與表格中的實際資料一致。 錯誤的定義可能會影響透過連結擷取的資料，例如意外重複記錄。

以表格名稱一致地為連結命名：連結名稱應有助於了解遠距表格的內容。

請勿將連結命名為尾碼為「id」。 例如，將其命名為「transaction」，而非「transactionId」。

依預設，Adobe Campaign會使用外部表格的主要索引鍵建立連結。 為了更清楚明瞭，最好在連結定義中明確定義連結。

### 基數 {#cardinality}

當您設計連結時，請確定在宣告1-1關係時目標籤錄是唯一的。 否則，當只需要一條記錄時，連接可能會返回多條記錄。 這會在傳送準備期間發生錯誤，當「查詢傳回的列數超過預期」時。 將連結名稱設定為與目標架構相同的名稱。

在(1)側的架構中，定義含有基數(1-N)的連結。 例如，應在事務架構中定義關係收件人(1)-(N)事務。

請注意，連結的反向基數預設為(N)。 通過將屬性revCardinality=&#39;single&#39;添加到連結定義中，可以定義連結(1-1)。

如果用戶不能看到反向連結，則可以使用連結定義revLink=&#39;_NONE_&#39;來隱藏它。 例如，一個很好的使用案例是定義從收件者到最後完成交易的連結。 您只需查看從收件者到最後一個交易的連結，並且無需從交易表中看到任何反向連結。

執行外部聯接的連結(1-0..1)應謹慎使用，因為它將影響系統效能。

## 資料保留 {#data-retention}

Adobe Campaign既非資料倉庫，也非報表工具。 因此，為確保Adobe Campaign解決方案的良好效能，應控制資料庫的增長。 為達成此目標，遵循下列一些最佳實務可能有所幫助。

關於保留，Campaign 中的內建記錄表有預先設定的保留期間，通常將其資料儲存時間限制在六個月或更短時間。

以下是內建表格的預設保留值。請注意，保留設定是由 Adobe 技術管理員在實施期間所設定，每個實作的值可能會因客戶需求而有所不同。

* **整合追蹤**：1 年
* **傳遞記錄**：6 個月
* **追蹤記錄**：1 年
* **已刪除傳遞**：1 週
* **匯入拒絕**：6 個月
* **訪客設定檔**：1 個月
* **優惠方案主張**：1 年
* **事件**：1 個月
* **事件處理統計資料**：1 個月
* **已封存事件**：1 年
* **忽略的管線事件**：1 個月

>[!CAUTION]
>
>自訂表格不會透過標準清除程式清除。 雖然在第一天可能不需要這項操作，但別忘了為自訂表格建立清除程式，因為這可能會導致效能挑戰。

有幾種解決方案可將Adobe Campaign中記錄的需求降至最低：
* 匯出Adobe Campaign以外資料倉庫中的資料。
* 產生匯總值，以減少空間，同時滿足您的行銷實務需求。 例如，您不需要Adobe Campaign中的完整客戶交易記錄，即可追蹤上次購買。

您可以在架構中宣告「deleteStatus」屬性。 將記錄標示為已刪除，然後延遲清除任務中的刪除會更有效。

[!DNL :speech_balloon:] 身為受管理Cloud Services使用者，請洽詢Adobe顧問或技術管理員，以進一步了解保留，或您是否需要為自訂表格設定保留。

## 效能 {#performance}

為了隨時確保效能更佳，請遵循下列最佳實務。

### 一般性建議 {#general-recommendations}

* 避免在查詢中使用「CONTAINS」等操作。 如果您知道需要什麼並且想要篩選，請使用「等於」或其他特定篩選運算子套用相同條件。
* 請嘗試確保在工作時間完成匯入和匯出等程式。
* 請確定所有每日活動都有排程並遵守排程。
* 如果日常進程中的一個或幾個失敗，並且如果強制在同一天運行該進程，請確保在啟動手動進程時沒有運行衝突進程，因為這可能影響系統效能。
* 請確定在匯入程式期間或執行任何手動程式期間，沒有執行任何每日促銷活動。
* 使用一個或多個引用表，而不是在每行中重複一個欄位。 使用索引鍵/值組時，最好選擇數值索引鍵。
* 短字串仍可接受。 如果外部系統中已有參考表格，則重複使用這些表格將有助於與Adobe Campaign的資料整合。

### 一對多關係{#one-to-many-relationships}

* 資料設計會影響可用性和功能。 如果您設計的資料模型具有許多一對多關係，則會讓使用者更難在應用程式中建構有意義的邏輯。 非技術行銷人員可能難以正確建構及了解一對多篩選邏輯。
* 將所有必要欄位放在一個表格中是件好事，因為這可讓使用者更輕鬆地建立查詢。 有時，如果可以避免加入，則跨表複製某些欄位對效能也有好處。
* 某些內建功能將無法參考一對多關係，例如選件加權公式和傳送。

## 大表{#large-tables}

Adobe Campaign仰賴協力廠商資料庫引擎。 根據提供程式，為較大表優化效能可能需要特定設計。

以下是使用大型表和複雜聯接設計資料模型時應遵循的一些常見最佳做法。

* 使用其他自訂收件者表格時，請務必為每個傳送對應提供專用的記錄表。
* 減少欄數，尤其是識別未使用的欄數。
* 通過避免複雜的聯接（例如在多個條件和/或多個列上的聯接）來優化資料模型關係。
* 對於聯接鍵，可以使用數字或字串型值。
* 盡量減少記錄保留的深度。 如果您需要更深入的歷史記錄，則可以匯總計算和/或處理自定義日誌表以儲存較大的歷史記錄。

### 表大小{#size-of-tables}

表大小是記錄數和每個記錄的列數的組合。 兩者都會影響查詢的效能。

* **小型**&#x200B;表與「傳送」表類似。
* **中等大小**&#x200B;表與收件人表的大小相同。 每位客戶有一筆記錄。
* **large-size**表與Broad日誌表類似。 每個客戶有許多記錄。
例如，如果您的資料庫包含1000萬個收件者，則「廣泛」日誌表包含約1億到2億條消息，而「傳送」表包含幾千條記錄。

列數也會影響效能。 Adobe Campaign資料庫的設計目的並非儲存未用於鎖定目標或個人化目的的歷史資料 — 這是一個運作資料庫。

要防止與高行數相關的任何效能問題，請僅在資料庫中保留必要的記錄。 任何其他記錄應匯出至協力廠商資料倉庫，並從Adobe Campaign作業資料庫中移除。

以下是一些關於表格大小的最佳實務：

* 設計欄位更少、數字資料更多的大型表。
* 請勿使用大量類型的欄來儲存小數字，例如布林值。
* 從表定義中刪除未使用的列。
* 請勿在Adobe Campaign資料庫中保留歷史或非作用中資料（匯出和清除）。
