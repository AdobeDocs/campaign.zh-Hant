---
solution: Campaign
product: Adobe Campaign
title: 資料模型最佳實務
description: 瞭解Campaign資料模型擴充最佳實務
translation-type: tm+mt
source-git-commit: 8dd7b5a99a0cda0e0c4850d14a6cb95253715803
workflow-type: tm+mt
source-wordcount: '2708'
ht-degree: 4%

---

# 資料模型最佳實務{#data-model-best-practices}

本檔案概述設計您的Adobe Campaign資料模型時的主要建議。

Adobe Campaign系統非常靈活，可以擴展到最初的實施範圍之外。 不過，儘管可能性無限，但必須做出明智決策並建立堅實的基礎，才能開始設計您的資料模型。

如需深入瞭解促銷活動內建表格及其互動，請參閱[本節](datamodel.md)。

：球：請讀取[本節](schemas.md)以開始使用促銷活動結構。

：球：瞭解如何配置擴展方案以擴展[本頁](extend-schema.md)中的Adobe Campaign資料庫的概念性資料模型。

## 資料模型體系結構{#data-model-architecture}

Adobe Campaign是功能強大的跨通道宣傳管理系統，可協助您調整線上和線下策略，以建立個人化客戶體驗。

### 以客戶為中心的方法{#customer-centric-approach}

雖然大多數電子郵件服務供應商都是透過以清單為中心的方式與客戶溝通，但Adobe Campaign仍依賴關係資料庫，以運用更廣泛的客戶及其屬性檢視。

要訪問每個表的說明，請轉至&#x200B;**[!UICONTROL Admin > Configuration > Data schemas]**，從清單中選擇資源，然後按一下&#x200B;**[!UICONTROL Documentation]**&#x200B;頁籤。


>[!NOTE]
>
>Adobe Campaign允許構建[自定義收件人表](custom-recipient.md)。 但是，在大多數情況下，建議使用內建的[收件者表](datamodel.md#ootb-profiles)，該表已預建了其他表和功能。

### Adobe Campaign資料{#data-for-campaign}

哪些資料應該傳送至Adobe Campaign? 確定行銷活動所需的資料至關重要。

>[!NOTE]
>
>Adobe Campaign既不是資料倉庫，也不是報告工具。 因此，請勿嘗試將所有可能的客戶及其相關資訊匯入Adobe Campaign，或匯入僅用於建立報表的資料。

要決定是否需要某個屬性在Adobe Campaign，請問問自己是否屬於以下類別：

* 用於&#x200B;**segmentation**&#x200B;的屬性
* 用於&#x200B;**資料管理進程**&#x200B;的屬性（例如聚合計算）
* 用於&#x200B;**個人化**&#x200B;的屬性

如果不是落入其中任何一個圈套，你很可能不需要Adobe Campaign的這個屬性。

### 資料類型選擇{#data-types}

為確保系統的良好架構和效能，請遵循下列最佳實務，在Adobe Campaign設定資料。

* 大型表格大多應包含數字欄位，並包含參考表格的連結（使用值清單時）。
* **expr**&#x200B;屬性允許將模式屬性定義為計算欄位，而不是表中的物理集值。 這可讓您存取不同格式的資訊（例如年齡和出生日期），而不需儲存兩個值。 這是避免重複欄位的好方法。 例如，「收件者」表格使用網域的運算式，該運算式已存在於電子郵件欄位中。
* 但是，當運算式計算複雜時，不建議使用&#x200B;**expr**&#x200B;屬性作為即時計算，可能會影響查詢的效能。
* **XML**&#x200B;類型是避免建立過多欄位的好方法。 但是，當它使用資料庫中的CLOB列時，它也佔用了磁碟空間。 它還可能導致複雜的SQL查詢，並可能影響效能。
* **string**&#x200B;欄位的長度應一律以欄定義。 依預設，Adobe Campaign的最大長度為255，但Adobe建議在您已知道大小不會超過較短長度時，將欄位保持在較短。
* 如果您確定源系統的大小被高估且無法達到，那麼在Adobe Campaign的欄位比源系統的欄位短是可以接受的。 這可能意味著Adobe Campaign的字串較短或整數較小。

### 欄位選擇{#choice-of-fields}

如果欄位具有定位或個人化目的，則必須將其儲存在表格中。 換言之，如果欄位不是用來傳送個人化電子郵件，或是用作查詢中的標準，則會佔用磁碟空間，但是卻毫無用處。

對於混合式和內部部署例項，FDA（Federated Data Access，允許存取外部資料的選用功能）涵蓋在促銷活動程式中新增「即時」欄位的需求。 如果你有食品藥物管理局的話，您不需要進口任何產品。 有關詳細資訊，請參閱[Federated Data Access](../connect/fda.md)。

### 鍵選擇{#choice-of-keys}

除了大多數表中預設定義的&#x200B;**autouuid**&#x200B;之外，您還應考慮添加一些邏輯或業務密鑰（帳戶號、客戶機號等）。 它稍後可用於導入／協調或資料包。 如需詳細資訊，請參閱[識別碼](#identifiers)。

高效的密鑰對效能至關重要。 數值資料類型應始終作為表的鍵。

<!-- ### Dedicated tablespaces {#dedicated-tablespaces}

The tablespace attribute in the schema allows you to specify a dedicated tablespace for a table.

The installation wizard allows you to store objects by type (data, temporary).

Dedicated tablespaces are better for partitioning, security rules, and allow fluid and flexible administration, better optimization, and performance. -->

## 標識符{#identifiers}

Adobe Campaign資源有三個識別碼，並且可以添加一個附加的識別碼。

下表說明這些識別碼及其用途。

| 識別碼 | 說明 | 最佳實務 |
|--- |--- |--- |
| ID | <ul><li>id是Adobe Campaign表的物理主鍵。 對於內建表，它是通用唯一ID(UUID)</li><li>此識別碼必須是唯一的。 </li><li>UUID可在架構定義中顯示。</li></ul> | <ul><li>自動產生的識別碼不應用於工作流程或套件定義中的參考。</li><li>表中的id是UUID，不應更改此類型。</li></ul> |
| 名稱（或內部名稱） | <ul><li>此資訊是表中記錄的唯一標識符。 此值可以手動更新，通常使用生成的名稱。</li><li>此識別碼會在部署在不同的Adobe Campaign例項時保留其值，且不應為空。</li></ul> | <ul><li>如果對象應從一個環境部署到另一個環境，請更名Adobe Campaign生成的記錄名稱。</li><li>當對象具有namespace屬性（例如&#x200B;*schema*）時，此通用命名空間將用於所有建立的自定義對象。 不應使用某些保留的名稱空間：*nms*、*xtk*。</li><li>當物件沒有任何名稱空間（例如&#x200B;*workflow*&#x200B;或&#x200B;*delivery*）時，此名稱空間概念會新增為內部名稱物件的首碼：*namespaceMyObjectName*。</li><li>請勿使用特殊字元，例如空格&quot;&quot;、半欄&quot;:&quot;或連字型大小&quot;-&quot;。 所有這些字元都會以底線&quot;_&quot;（允許的字元）取代。 例如，&quot;abc-def&quot;和&quot;abc:def&quot;會儲存為&quot;abc_def&quot;，並互相覆寫。</li></ul> |
| 標籤 | <ul><li>標籤是Adobe Campaign中對象或記錄的業務標識符。</li><li>此對象允許空格和特殊字元。</li><li>它不保證記錄的獨特性。</li></ul> | <ul><li>建議您決定物件標籤的結構。</li><li>這是最易於使用的解決方案，可為Adobe Campaign用戶識別記錄或對象。</li></ul> |

Adobe Campaign主鍵是所有內置表的自動生成UUID，對於自定義表可以是相同的。

即使ID數量是無限的，您仍應考慮資料庫的大小，以確保最佳效能。 為防止出現任何問題，請務必調整實例清除設定。 如需詳細資訊，請參閱[本節](#data-retention)。


## 自訂內部金鑰{#custom-internal-keys}

在Adobe Campaign建立的每個表都需要主鍵。

大多陣列織都從外部系統導入記錄。 雖然「收件者」表格的實體金鑰是「id」屬性，但您也可以另外決定自訂金鑰。

此自訂金鑰是外部系統餵送Adobe Campaign時的實際記錄主要金鑰。

建立自訂表格時，有兩個選項：
* 自動產生的金鑰(id)和內部金鑰（自訂）的組合。 如果您的系統金鑰是複合金鑰或非整數，這個選項就很有趣。 整數在大表格和與其他表格連接時，可提供更高的效能。
* 使用主鍵作為外部系統主鍵。 此解決方案通常較為受歡迎，因為它可簡化資料匯入和匯出的方式，而且不同系統之間的索引鍵一致。 如果索引鍵名為&quot;id&quot;，且預期會填入外部值（非自動產生），則應停用Autouuid。

>[!CAUTION]
>
>工作流中不應使用autouuid作為參考。


## 連結和基數{#links-and-cardinality}

### 連結 {#links}

小心大桌上的「自己」誠信。 刪除具有「擁有」完整性的寬表的記錄可以停止實例。 表被鎖定，刪除操作逐個執行。 因此，最好對具有大卷的子表使用「中性」完整性。

將連結聲明為外部連接不利於效能。 零ID記錄模擬外部連接功能。 如果連結使用autouuid，則不需要聲明外部連接。

雖然可以在工作流中連接任何表，但Adobe建議直接在資料結構定義中定義資源之間的公共連結。

連結的定義應與表格中的實際資料一致。 錯誤的定義可能會影響透過連結擷取的資料，例如意外重複記錄。

以表名稱一致命名連結：連結名稱應有助於瞭解遠程表是什麼。

請勿將連結命名為「id」為尾碼。 例如，將其命名為&quot;transaction&quot;，而非&quot;transactionId&quot;。

預設情況下，Adobe Campaign將使用外部表的主鍵建立連結。 為了更清楚，最好在連結定義中明確定義連結。

### 基數{#cardinality}

當您設計連結時，請確定目標籤錄在宣告1-1關係時是唯一的。 否則，當僅需要一條記錄時，連接可能會返回多個記錄。 這會在「查詢傳回的列比預期多」時，在傳送準備期間產生錯誤。 將連結名稱設定為與目標方案相同的名稱。

在架構(1)側定義具有基數(1-N)的連結。 例如，應在事務方案中定義關係收件人(1)-(N)事務。

請注意，連結的反向基數預設為(N)。 通過將屬性revCardinality=&#39;single&#39;添加到連結定義中，可以定義連結(1-1)。

如果使用者看不到反向連結，您可使用連結定義revLink=&#39;_NONE_&#39;來隱藏該連結。 例如，最好的使用案例是定義從收件者到最後完成交易的連結。 您只需查看從收件人到最後一個事務處理的連結，並且不需要從事務處理表中查看任何反向連結。

執行外部連接(1-0..1)的連結應小心使用，因為它將影響系統效能。

## 資料保留 {#data-retention}

Adobe Campaign既不是資料倉庫，也不是報告工具。 因此，為了確保Adobe Campaign解決方案的良好效能，資料庫增長應保持在可控範圍內。 為達成此目的，請遵循下列一些最佳實務。

關於保留，Campaign 中的內建記錄表有預先設定的保留期間，通常將其資料儲存時間限制在六個月或更短時間。

以下是內建表格的預設保留值。請注意，保留設定是由 Adobe 技術管理員在實施期間所設定，每個實作的值可能會因客戶需求而有所不同。

* **整合追蹤**：1 年
* **傳遞記錄**：6 個月
* **追蹤記錄**：1 年
* **已刪除傳遞**：1 週
* **匯入拒絕**：6 個月
* **訪客設定檔**：1 個月
* **優惠方案主張**：1 年
* **事件**：1 個月
* **事件處理統計資料**：1 個月
* **已封存事件**：1 年
* **忽略的管線事件**：1 個月

>[!CAUTION]
>
>自定義表不會使用標準清除流程進行清除。 雖然第一天可能不需要這個選項，但別忘了為自訂表格建立清除程式，因為這可能會導致效能挑戰。

有幾種解決方案可將Adobe Campaign記錄的需求降到最低：
* 將資料匯出至Adobe Campaign以外的資料倉庫。
* 產生匯整值，以節省空間，同時符合行銷實務。 例如，您不需要Adobe Campaign的完整客戶交易記錄，就能追蹤上次購買。

您可以在架構中宣告&quot;deleteStatus&quot;屬性。 將記錄標籤為已刪除，然後延遲清除任務中的刪除會更有效。

:speech_balloon:身為受管理的Cloud Services用戶，請聯繫Adobe顧問或技術管理員，以瞭解有關保留的更多資訊，或者您是否需要為自定義表設定保留。

## 效能{#performance}

為了確保隨時都能提供更佳的效能，請遵循下列最佳實務。

### 一般性建議 {#general-recommendations}

* 請避免在查詢中使用「CONTAINS」等操作。 如果您知道要篩選的項目，請使用「EQUAL TO」或其他特定篩選運算子套用相同的條件。
* 請試著確保在工作時間完成匯入和匯出等程式。
* 請確定所有日常活動都有排程，並遵守排程。
* 如果一個或幾個日進程失敗，並且如果強制在同一天運行該進程，請確保手動進程啟動時沒有運行衝突的進程，因為這可能影響系統效能。
* 請確定匯入程式期間或執行任何手動程式時，未執行任何每日促銷活動。
* 使用一或多個參考表，而不是在每一列中複製欄位。 使用鍵／值對時，最好選擇數字鍵。
* 短字串仍可接受。 如果引用表已在外部系統中就位，則重複使用表將有助於與Adobe Campaign的資料整合。

### 一對多關係{#one-to-many-relationships}

* 資料設計會影響可用性和功能。 如果您設計的資料模型具有許多一對多關係，使用者就很難在應用程式中建構有意義的邏輯。 一對多篩選邏輯對於不具備技術背景的行銷人員而言可能很難正確建構和理解。
* 將所有必要欄位都放在一個表格中是好事，因為這可讓使用者更輕鬆地建立查詢。 有時，如果在表中複製某些欄位，則避免連接也會對效能有好處。
* 某些內建功能將無法參考一對多關係，例如選件加權公式和傳送。

## 大表{#large-tables}

Adobe Campaign依賴第三方資料庫引擎。 根據提供方的不同，為較大的表優化效能可能需要特定的設計。

以下是使用大型表和複雜連接設計資料模型時應遵循的一些常見最佳做法。

* 使用其他自訂收件者表格時，請確定每個傳送對應都有專用的記錄表。
* 減少欄數，尤其是識別未使用的欄數。
* 通過避免複雜的連接（如多個條件和／或多個列上的連接）來優化資料模型關係。
* 對於連接鍵，請始終使用數字資料，而不是字串。
* 盡可能減少日誌保留深度。 如果您需要更深入的歷史記錄，您可以匯總計算和／或處理自訂的日誌表，以儲存較大的歷史記錄。

### 表大小{#size-of-tables}

表大小是記錄數和每個記錄列數的組合。 這兩種方法都會影響查詢的效能。

* **small-size**&#x200B;表與「傳送」表類似。
* **中等大小**&#x200B;表與Recipient表的大小相同。 每位客戶有一個記錄。
* **large-size**表與Broad日誌表類似。 每個客戶都有許多記錄。
例如，如果您的資料庫包含1000萬個收件者，「廣泛」記錄表包含約1億到2億條訊息，而「傳送」表則包含數千條記錄。

行數也會影響效能。 Adobe Campaign資料庫不是用於儲存不主動用於定位或個人化目的的歷史資料——這是一個操作資料庫。

要防止與行數較多相關的任何效能問題，請僅在資料庫中保存必要的記錄。 應將任何其他記錄導出到第三方資料倉庫，並從Adobe Campaign業務資料庫中刪除。

以下是關於表大小的一些最佳做法：

* 使用較少的欄位和更多數值資料，設計大型表格。
* 請勿使用大量的欄類型來儲存小數字，例如布林值。
* 從表定義中刪除未使用的列。
* 請勿將歷史或非活動資料保留在您的Adobe Campaign資料庫（匯出和清除）中。
